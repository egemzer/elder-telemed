<!DOCTYPE html>
<html>

<head>
    <title>Telemedicine for the Elderly</title>
    <link rel="stylesheet" href="css/main.css" />
</head>

<body>

    <h1>Telemedicine for the Elderly</h1>

    <input id="new_message"><button id='send'>Send</button>
    <div id='output'></div>

    <script src="/__/firebase/7.12.0/firebase-app.js"></script>
    <script src="/__/firebase/7.12.0/firebase-analytics.js"></script>
    <script src="/__/firebase/7.12.0/firebase-functions.js"></script>

    <!-- Initialize Firebase -->
    <script src="/__/firebase/init.js"></script>
    <script>
        document.getElementById('send').addEventListener('click', function() {
            var sendMessage = firebase.functions().httpsCallable('sendMessage');
            var messageText = document.getElementById('new_message').value;
            sendMessage({text: messageText}).then(function(result) {
                // Read result of the Cloud Function.
                console.log(result.data.text)
            });
        });
        document.addEventListener('DOMContentLoaded', function() {
            if (location.hostname === "localhost") {
                firebase.functions().useFunctionsEmulator("http://localhost:5001");
            }
        });
    </script>
</body>

</html>